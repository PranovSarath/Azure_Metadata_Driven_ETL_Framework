variables:
- group: tst

name: $(pipelineName)

stages:
  - stage: arm_template_deploy
    jobs:
      - job: arm_template_deploy
        steps:
          # - checkout: self
          
          - task: AzureResourceManagerTemplateDeployment@3
            inputs:
              deploymentScope: 'Resource Group'
              azureResourceManagerConnection: $(azServiceConnectionName)
              subscriptionId: $(subscriptionId)
              action: 'Create Or Update Resource Group'
              resourceGroupName: $(resourceGroupName)
              location: $(location)
              templateLocation: 'Linked artifact'
              csmFile: '$(System.DefaultWorkingDirectory)/env_setup/test_env/template.json'
              csmParametersFile: '$(System.DefaultWorkingDirectory)/env_setup/test_env/parameters.json'
              deploymentMode: 'Incremental'
          

